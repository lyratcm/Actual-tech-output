namespace = lyra_true_tech
country_event = {
	id = lyra_true_tech.1
	hide_window = yes
	fire_only_once = yes
	trigger = {
		is_ai = no
	}
	immediate = {
		set_country_flag = is_host
		start_situation = {
			type = delta_to_tech
			target = owner
		}
		every_situation = {
			limit = { is_situation_type = delta_to_tech }
			prev = {
				set_variable = { which = delta_to_tech_progress value = prev.trigger:situation_progress }
			}
		}

		country_event = {
			id = lyra_true_tech.2
			days = 30
		}
	}
}

country_event = {
	id = lyra_true_tech.2
	hide_window = yes
	is_triggered_only = yes

	immediate = {
		#make sure country has event chain
		inverted_switch = {
			trigger = has_event_chain
			actual_tech_chain = { begin_event_chain = { event_chain = "actual_tech_chain" target = ROOT } }
			actual_tech_host_chain = { begin_event_chain = { event_chain = "actual_tech_host_chain" target = ROOT } }
		}
		#runs ordered country which looks at all countries and takes the one with the highest (but can be lowest) value of that and then does an effect on that country, TRUE_VALUE replaces the order_by and event target set values
		ordered_country_true_value = { TRUE_VALUE = true_tech }
		ordered_country_true_value = { TRUE_VALUE = true_tradition }
		ordered_country_true_value = { TRUE_VALUE = true_alloys }
		ordered_country_true_value = { TRUE_VALUE = true_pops }
		country_event = {
			id = lyra_true_tech.2
			days = 30
		}
	}
}
